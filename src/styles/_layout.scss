@import './vars';
@import './mixins';
@import './import_once';
@import './animation';

@include exports('lineupengine') {
  #{$engine_selector} {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    align-content: stretch;
    box-sizing: border-box;

    *::before,
    *::after {
      box-sizing: inherit;
    }

    > header {
      flex: 0 0 auto;
      overflow-x: hidden;
      margin-bottom: 3px;
      padding-bottom: 1px;
      transform: translate3d(0, 0, 2px);

      @supports (-moz-appearance: meterbar) {

        // firefox only
        overflow-y: hidden;
      }
    }

    > main {
      flex: 1 1 auto;
      overflow: auto;
      position: relative;
    }

    > header,
    > main {
      display: flex;
      flex-direction: row;
      align-items: stretch;
      justify-content: stretch;
      scroll-behavior: auto;

      > * {
        flex: 0 0 auto;
      }
    }

    > header > article,
    > main > article > div {
      display: flex;
    }

    &.le-shifted > header > article > .frozen,
    &.le-shifted > main > article > div > .frozen {
      position: sticky;
      left: 0;
      background-color: white;
      z-index: 1;
    }

    > main > article > div {
      position: relative;
      background: white;
      background-clip: content-box;
      box-sizing: content-box;
    }

    > main:not(.scrolling) > article > div {
      &:hover,
      &.le-highlighted {
        @include collapsing-row-border($engine_row_outline_width, $engine_row_outline_color);
      }
    }

    > header > footer,
    > main > footer {
      transition: none !important;
      height: 1px !important;
      width: 1px;
      left: -1px;
      visibility: hidden;
    }

    > main > article {
      position: absolute;
    }

    &#{$engine_selector}-striped > main > article {
      &:not(.odd) > div:nth-child(even),
      &.odd > div:nth-child(odd),
      &:not(.odd) > div:nth-child(even) > .frozen,
      &.odd > div:nth-child(odd) > .frozen {
        background-color: $engine_even_color;
      }
    }
  }

  #{$engine_selector}-scrollbar-tester {
    position: absolute;
    top: -10000px;
    left: -10000px;
    overflow: auto;
    width: 100px;
    height: 100px;

    > div {
      width: 200px;
      height: 200px;
      overflow: auto;
    }
  }
}
