@import "./vars";
@import "./mixins";

#{$engine_selector} {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  align-content: stretch;
  overflow-x: auto;

  > header {
    flex: 0 0 auto;
    overflow-x: hidden;

    @supports (-moz-appearance: meterbar) { // firefox only
      overflow-y: hidden;
    }

    margin-bottom: 3px;

    > :last-child {
      margin-right: 5px; // scroll bar?
    }
  }

  > main {
    flex: 1 1 auto;
    overflow-y: auto;
  }

  > header,
  > main {
    display: flex;
    flex-direction: row;
    align-items: stretch;
    justify-content: stretch;

    > * {
      flex: 0 0 auto;
    }
  }

  > header > article,
  > main > article > div {
    display: -ms-grid;
    display: grid;
    grid-auto-flow: column;
    -ms-grid-column-align: stretch;
    -ms-grid-row-align: stretch;
    align-items: stretch;
    justify-items: stretch;

    > * {
      overflow: hidden;
      text-overflow: ellipsis;

      &.frozen {
        background-color: white;
        z-index: 1;
      }
    }
  }

  > main:not(.scrolling) > article > div {
    /* @include collapsing-row-border($engine_row_hover_width, #eee); */
    padding-top: 2px;

    &:hover {
      position: relative;
      z-index: 2;

      @include collapsing-row-border($engine_row_outline_width, $engine_row_outline_color);
    }
  }

  &:not(.ms-edge) > header > article,
  &:not(.ms-edge) > main > article > div {
    > .frozen {
      position: sticky;
      left: 0;
    }
  }

  &#{$engine_selector}-striped > main > article {
    &:not(.odd) > div:nth-child(even),
    &.odd > div:nth-child(odd),
    &:not(.odd) > div:nth-child(even) > *.frozen,
    &.odd > div:nth-child(odd) > *.frozen {
      background-color: $engine_even_color;
    }
  }

  @import './animation';
}

#{$engine_multi_selector} {
  > header,
  > main {
    display: grid;
  }
}
